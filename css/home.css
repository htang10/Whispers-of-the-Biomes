/* =========================================================
   1. ROOT VARIABLES
   ---------------------------------------------------------
   Define shared properties such as font sizes, animation
   durations, color themes, and biome-specific settings.
   ========================================================= */


:root {
    /* --- Font & Typography --- */
    --font-size-intro: 3rem;
    --font-size-button: 2rem;
    
    /* --- Layout dimensions --- */
    --button-width: 10rem;
    --button-height: 5rem;
    --button-radius: 1.25rem;
    --slider-gap: 1rem;
    --intro-text-margin: 0 max(0.625rem, 10%);
    --prev-offsetX: -2.5em;
    --prev-rotateY-inactive: -50deg;
    --next-offsetX: 2.5em;
    --next-rotateY-inactive: 50deg;
    --button-scale-inactive: 0.75;
    --perspecive-inactive: 37.5rem;

    /* --- Main Styling --- */
    --text-shadow-color: rgba(255,255,255,0.6);
    --border-color: rgba(255, 255, 255, 0.2);
    --box-shawdow-color: rgba(255, 255, 255, 0.2);

    /* --- Biome Themes (Color & Emoji) --- */
    --icon-size: 2.5rem;
    --forest-color-bg: forestgreen;
    --mesa-color-bg: rgb(188, 161, 119);
    --caldera-color-bg: rgb(229,101,32);
    --marine-color-bg: rgb(53, 96, 149);
    --tundra-color-bg: rgb(135,142,205);
    
    /* --- Timing & Animation control --- */
    --intro-animation-duration: 4s;
    --intro-transition-duration: 1s;
    --earth-transition-duration: 4s;
    --item-transition-duration: 0.75s;
    --hover-transition-duration: 1s;
    --enter-animation-duration: 1.5s;
    --enter-animation-delay: 0.3s;
}


/* =========================================================
   2. INTRO SCENE
   ---------------------------------------------------------
   Controls the layout, positioning, and fade animations
   for the introductory text that appears on page load.
   ========================================================= */ 


/* ---------- Layout & Text ---------- */
#intro {
    position: fixed;
    inset: 0;
    z-index: 10;
    display: grid;
    justify-content: center;
    align-items: center;
    background-color: var(--color-bg);
    opacity: 1;
    transition: opacity var(--earth-transition-duration) ease-out;
}

/* Fades the intro screen before revealing the 3D Earth.
   Triggered by JS once intro text animation finishes */
#intro.fade-out {
    opacity: 0;
}

/* ---------- Text Lines ---------- */
.line {
    position: absolute;
    inset: auto 0;
    margin: var(--intro-text-margin);
    font-size: var(--font-size-intro);
    text-align: center;
    opacity: 0;
    animation: fadeInOut var(--intro-animation-duration) ease-in-out var(--intro-transition-duration) forwards;
}

/* Second line appears after the first */
.line:nth-child(2) {
    animation-delay: calc(var(--intro-animation-duration) + var(--intro-transition-duration));
}


/* =========================================================
   3. EARTH CANVAS
   ---------------------------------------------------------
   Styles the Three.js canvas element and ensures it
   scales responsively across different viewports.
   ========================================================= */


canvas {
    display: block;
    width: 100vw !important;
    height: 100vh !important;
}


/* =========================================================
   4. BIOME SLIDER
   ---------------------------------------------------------
   Handles layout, positioning, and transition effects for
   biome navigation buttons, including active/prev/next states.
   ========================================================= */


/* ---------- Layout ---------- */
.slider {
    position: absolute;
    bottom: 25vh;
    display: flex;
    gap: var(--slider-gap);
    justify-content: center;
    align-items: center;
    width: 100vw;
}

/* ---------- Base Button Style ---------- */
.item {
    position: absolute;
    display: none;
    justify-content: center;
    align-items: center;
    width: var(--button-width);
    height: var(--button-height);
    font-size: var(--font-size-button);
    text-shadow: 0 0 0.5rem var(--text-shadow-color);
    border: 5px solid var(--border-color);
    border-radius: var(--button-radius);
    box-shadow: inset 0 0.1rem 0.25rem var(--box-shawdow-color);
}

/* ---------- Active Button ---------- */
.active {
    z-index: 1;
    display: flex;
    overflow: hidden;
    transition: all var(--item-transition-duration) ease-in;
    cursor: pointer;
}

/* '::before' shows the biome name, '::after' shows the emoji.
   On hover, name slides up and emoji slides in for a reveal effect.
   Biome name and emoji are unique for each biome */
.active::before,
.active::after {
    position: absolute;
    inset: 0;
    z-index: 2;
    display: flex;
    justify-content: center;
    align-items: center;
    color: var(--color-text);
    transition: all var(--hover-transition-duration) ease-out;
}

.active::before {
    content: attr(data-label);
}

.active::after {
    font-size: var(--icon-size);
    transform: translateY(4em);
    content: attr(icon-label);
}

/* Applies hover animation only on devices that support real cursor hover (e.g., desktop).
   Prevents hover from getting stuck on touchscreens. */
@media (hover: hover) and (pointer: fine) {
  .active:hover::before {
    transform: translateY(-4em);
  }
  .active:hover::after {
    transform: translateY(0.1em);
  }
}

/* ---------- Neighbor Buttons ---------- */

/* Positions neighbor biome buttons beside the active one.
   JS dynamically swaps 'prev' and 'next' classes to update slider order */
.prev, .next {
    z-index: 0;
    display: flex;
    opacity: 0.5;
    transition: all var(--item-transition-duration) ease-out;
    cursor: default;
}

.prev {
    transform-origin: left center;
    transform: translateX(var(--prev-offsetX)) scale(var(--button-scale-inactive)) perspective(var(--perspecive-inactive)) rotateY(var(--prev-rotateY-inactive));
}

.next {
    transform-origin: right center;
    transform: translateX(var(--next-offsetX)) scale(var(--button-scale-inactive)) perspective(var(--perspecive-inactive)) rotateY(var(--next-rotateY-inactive));
}

/* Adds fade-in effect when a new biome button appears.
   JS dynamically toggles this class to make transitions smoother */
.animate-enter {
    animation: enter var(--enter-animation-duration) ease backwards;
    animation-delay: var(--enter-animation-delay);
}

/* Disables hover transition briefly during biome switch 
   to prevent flickering while elements update */
.no-transition::before,
.no-transition::after {
    transition: none;
}


/* =========================================================
   5. MUTE BUTTON
   ---------------------------------------------------------
   Styles the mute toggle positioned at the top-right corner
   for controlling background ambient sound.
   ========================================================= */


#mute-btn {
    position: fixed;
    inset: 1rem 1rem auto auto;
    display: flex;
    justify-content: center;
    align-items: center;
    width: fit-content;
    height: fit-content;
    margin: auto;
    font-size: 2rem;
    background-color: transparent;
    border: none;
    cursor: pointer;
}


/* =========================================================
   6. BIOME THEMES
   ---------------------------------------------------------
   Defines background colors and theme-specific styles for
   each biome (Forest, Mesa, Caldera, Marine, Tundra).
   ========================================================= */


/* ---------- Forest ---------- */
#forest {
    background-color: var(--forest-color-bg);
}

/* ---------- Mesa ---------- */
#mesa {
    background-color: var(--mesa-color-bg);
}

/* ---------- Caldera ---------- */
#caldera {
    background-color: var(--caldera-color-bg);
}

/* ---------- Marine ---------- */
#marine {
    background-color: var(--marine-color-bg);
}

/* ---------- Tundra ---------- */
#tundra {
    background-color: var(--tundra-color-bg);
}


/* =========================================================
   7. ANIMATIONS
   ---------------------------------------------------------
   Declares keyframes and transition timing used for button
   reveals, intro fade, and biome entry effects.
   ========================================================= */


/* ---------- Entry animation for previous/next buttons ---------- */
@keyframes enter {
    0% {opacity: 0;}
    70% {opacity: 0.5;}
}

/* ---------- Fading animation for intro scene ---------- */
@keyframes fadeInOut {
    0% {opacity: 0;}
    40% {opacity: 1;}
    70% {opacity: 1;}
    100% {opacity: 0;}
}

/* ===== END OF FILE ===== */